<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ultra-Pro Lua Obfuscator & Deobfuscator</title>

<style>
body {
    background:#000010;
    color:#d9caff;
    font-family: monospace;
    text-align:center;
    padding:20px;
}
textarea {
    width:90%;
    height:200px;
    background:#0a0a1a;
    color:#fff;
    border:2px solid #8a3cff;
    border-radius:10px;
    padding:10px;
    resize:none;
}
button {
    background: linear-gradient(90deg, #8a3cff, #ff61f6);
    border:none;
    padding:18px 40px;
    margin:12px 0;
    border-radius:15px;
    font-size:20px;
    font-weight:bold;
    color:white;
    cursor:pointer;
    transition:0.2s;
    width:85%;
}
button:hover {
    transform:scale(1.05);
    box-shadow:0 0 15px #ff61f6;
}
input[type="file"] {
    margin:10px;
    color:#fff;
}
</style>
</head>
<body>

<h1>ğŸ”’ Ultra-Pro Lua Obfuscator & ğŸ”“ Deobfuscator</h1>

<input type="file" id="fileInput" accept=".lua">

<textarea id="input" placeholder="Ø¶Ø¹ ÙƒÙˆØ¯ Lua Ù‡Ù†Ø§..."></textarea>

<button onclick="obfuscate()">ğŸ”’ ØªØ´ÙˆÙŠØ´ ÙˆØªØ´ÙÙŠÙ€Ø± Ù‚ÙˆÙŠ</button>
<button onclick="deobfuscate()">ğŸ”“ ÙÙƒ Ø§Ù„ØªØ´ÙÙŠØ±</button>

<textarea id="output" placeholder="Ø§Ù„Ù†ØªÙŠØ¬Ø© ØªØ¸Ù‡Ø± Ù‡Ù†Ø§..."></textarea>

<button onclick="downloadFile()">â¬‡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ù</button>

<script>
// =================== ØªÙˆÙ„ÙŠØ¯ Ø£Ø³Ù…Ø§Ø¡ Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© ===================
function randomName(len=16){
    const chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
    let s="";
    for(let i=0;i<len;i++) s+=chars[Math.floor(Math.random()*chars.length)];
    return s;
}

// =================== ØªØ´ÙÙŠØ± ===================
function deepEncrypt(str){
    let key = Math.floor(Math.random()*255)+1;
    let bytes = new TextEncoder().encode(str).map(b=>b^key);
    bytes = bytes.map(b=>(b+17)&0xFF);
    let b64 = btoa(String.fromCharCode(...bytes));
    return {cipher:b64, key:key};
}

// =================== ÙÙƒ Ø§Ù„ØªØ´ÙÙŠØ± ===================
function deepDecrypt(b64,key){
    let arr = [];
    for(let c of atob(b64)) arr.push(c.charCodeAt(0));
    arr = arr.map(x=>((x-17)&0xFF) ^ key);
    return String.fromCharCode(...arr);
}

// =================== ØªØ´ÙˆÙŠØ´ ÙˆØªÙˆÙ„ÙŠØ¯ Ø§Ù„ÙƒÙˆØ¯ ===================
function obfuscate(){
    let code = document.getElementById("input").value;
    if(!code) return alert("Ø¶Ø¹ ÙƒÙˆØ¯ Lua Ø£ÙˆÙ„Ø§Ù‹!");

    let enc = deepEncrypt(code);

    let keyVar = randomName(12);
    let cipherVar = randomName(18);
    let loader = randomName(15);
    let junkA = randomName(13);
    let junkB = randomName(13);

    let finalCode = `
local ${keyVar}=${enc.key}
local ${cipherVar}="${enc.cipher}"

function ${junkA}() for i=1,10 do local x=i*3 end end
function ${junkB}() return 1337 end

local function ${loader}(b64,key)
    local data={}
    for c in b64:gmatch(".") do table.insert(data,string.byte(c)) end
    for i=1,#data do data[i]=(data[i]-17)~key end
    local str=string.char(table.unpack(data))
    load(str)()
end

${loader}(${cipherVar},${keyVar})
`;
    document.getElementById("output").value = finalCode;
}

// =================== ÙÙƒ ØªØ´ÙÙŠØ± Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…Ø´ÙØ± ===================
function deobfuscate(){
    let encCode = document.getElementById("input").value;
    if(!encCode) return alert("Ø¶Ø¹ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…Ø´ÙØ±!");

    let keyMatch = encCode.match(/local%s+[%w_]+%s*=%s*(%d+)/);
    let cipherMatch = encCode.match(/local%s+[%w_]+%s*=%s*"([A-Za-z0-9+/=]+)"/);

    if(!keyMatch || !cipherMatch)
        return alert("ØªØ¹Ø°Ø± Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ key Ø£Ùˆ Base64");

    let key = parseInt(keyMatch[1]);
    let cipher = cipherMatch[1];

    let result = deepDecrypt(cipher, key);
    document.getElementById("output").value = result;
}

// =================== ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ù ===================
function downloadFile(){
    let text = document.getElementById("output").value;
    if(!text) return alert("Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø´ÙŠØ¡ Ù„Ù„ØªØ­Ù…ÙŠÙ„!");

    const blob = new Blob([text], { type: "text/plain;charset=utf-8" });
    const link = document.createElement("a");
    link.href = URL.createObjectURL(blob);
    link.download = "lua_output.lua";

    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
}

// =================== Ø±ÙØ¹ Ù…Ù„Ù ===================
document.getElementById("fileInput").addEventListener("change", (e)=>{
    const file = e.target.files[0];
    if(!file) return;
    const reader = new FileReader();
    reader.onload = ()=> document.getElementById("input").value = reader.result;
    reader.readAsText(file, "UTF-8");
});
</script>

</body>
</html>